

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>High-level (public) API: Exported classes and functions &mdash; meep_adjoint 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/toggle_visibility.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Low-level (private) API: Classes and functions intended for use within meep_adjoint" href="LowLevel.html" />
    <link rel="prev" title="Overview of the meep_adjoint class hierarchy" href="../implementation/ClassHierarchy.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> meep_adjoint
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">meep_adjoint: A python package for adjoint sensitivity analysis in MEEP</a></li>
</ul>
<p class="caption"><span class="caption-text">Overview and Invitation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../example_gallery/index.html">Example Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization/index.html">Configuration and customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">General reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/index.html">Visualization Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test_suite/index.html">Test suite</a></li>
</ul>
<p class="caption"><span class="caption-text">Implementation notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../implementation/MathAndPhysicsOfAdjoints.html">Implementation I: Physics and math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/ClassHierarchy.html">Implementation II: Class hierarchy</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"> High-level (public) API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#optimizationproblem-driver-class-for-meep-adjoint-sessions"><code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationProblem</span></code>: Driver class for <code class="xref py py-obj docutils literal notranslate"><span class="pre">meep_adjoint</span></code> sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#package-level-functions-for-accessing-configuration-options">Package-level functions for accessing configuration options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adjoint-solver-options">Adjoint-solver options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualization-options">Visualization options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="LowLevel.html"> Low-level (internal) API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">meep_adjoint</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>High-level (public) API: Exported classes and functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/API/HighLevel.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Code+Pro&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display+SC&display=swap" rel="stylesheet"><div class="section" id="high-level-public-api-exported-classes-and-functions">
<h1>High-level (public) API: Exported classes and functions<a class="headerlink" href="#high-level-public-api-exported-classes-and-functions" title="Permalink to this headline">¶</a></h1>
<p>The “high-level” API consists of classes, functions, and other python objects
intended specifically to be invoked by <a class="reference internal" href="../meep_adjoint/docs/index.html#module-meep_adjoint" title="meep_adjoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meep_adjoint</span></code></a> users in driver
scripts and interactive sessions.</p>
<p>In principle, a high-level API offers
access to a package’s full range of capabilities via maximally streamlined
and convenient interfaces that do not require users to know anything about
under-the-hood implementation details. I think the high-level API to
<a class="reference internal" href="../meep_adjoint/docs/index.html#module-meep_adjoint" title="meep_adjoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meep_adjoint</span></code></a> is quite succcessful by this standard: it should be
entirely possible for device engineers to assemble a productive
<a class="reference internal" href="../meep_adjoint/docs/index.html#module-meep_adjoint" title="meep_adjoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meep_adjoint</span></code></a>-based design-optimization workflow using only the
public class methods and package-level functions documented on this page.</p>
<p>On the other hand, some users may be interested in delving into the innards
of the adjoint-sensitivity implementation in <a class="reference internal" href="../meep_adjoint/docs/index.html#module-meep_adjoint" title="meep_adjoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meep_adjoint</span></code></a>—perhaps
to extend the capabilities of the package, or to improve its performance,
or to borrow pieces of the computation for other projects, or perhaps
just to trace through the details of how it all works. Users interested
in how the sausage is made are referred to the
<a class="reference internal" href="LowLevel.html"><span class="doc">low-level API reference</span></a> on the following page,
as well as the discussion of the class hierarchy
in the <span class="xref std std-ref">implementation notes</span>.</p>
<div class="section" id="optimizationproblem-driver-class-for-meep-adjoint-sessions">
<h2><a class="reference internal" href="#meep_adjoint.OptimizationProblem" title="meep_adjoint.OptimizationProblem"><code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationProblem</span></code></a>: Driver class for <a class="reference internal" href="../meep_adjoint/docs/index.html#module-meep_adjoint" title="meep_adjoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meep_adjoint</span></code></a> sessions<a class="headerlink" href="#optimizationproblem-driver-class-for-meep-adjoint-sessions" title="Permalink to this headline">¶</a></h2>
<span class="target" id="theoptimizationproblemclass"></span><dl class="class">
<dt id="meep_adjoint.OptimizationProblem">
<em class="property">class </em><code class="sig-name descname">OptimizationProblem</code><span class="sig-paren">(</span><em class="sig-param">objective_regions=[]</em>, <em class="sig-param">objective=None</em>, <em class="sig-param">basis=None</em>, <em class="sig-param">design_region=None</em>, <em class="sig-param">cell_size=None</em>, <em class="sig-param">background_geometry=[]</em>, <em class="sig-param">foreground_geometry=[]</em>, <em class="sig-param">sources=None</em>, <em class="sig-param">source_region=[]</em>, <em class="sig-param">extra_quantities=[]</em>, <em class="sig-param">extra_regions=[]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/optimization_problem.html#OptimizationProblem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.OptimizationProblem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Top-level class in the MEEP adjoint module.</p>
<p>Intended to be instantiated from user scripts with mandatory constructor
input arguments specifying the data required to define an adjoint-based
optimization.</p>
<p>The class knows how to do one basic thing: Given an input vector
of design variables, compute the objective function value (forward
calculation) and optionally its gradient (adjoint calculation).
This is done by the __call__ method. The actual computations
are delegated to a hierarchy of lower-level classes, of which
the uppermost is TimeStepper.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>regions</strong> (<em>objective</em>) – subregions of the computational cell over which frequency-domain
fields are tabulated and used to compute objective quantities</p></li>
<li><p><strong>objective</strong> (<em>str</em>) – definition of the quantity to be maximized. This should be
a mathematical expression in which the names of one or more
objective quantities appear, and which should evaluate to
a real number when numerical values are substituted for the
names of all objective quantities.</p></li>
<li><p><strong>basis</strong> (<em>Basis</em>) – </p></li>
<li><p><strong>design_region</strong> (<a class="reference internal" href="../meep_adjoint/docs/API/LowLevel.html#meep_adjoint.Subregion" title="meep_adjoint.Subregion"><em>Subregion</em></a>) – <p>(precisely one of these should be non-None) Specification
of function space for the design permittivity.</p>
<p>In general, basis will be a caller-created instance of
some subclass of meep.adjoint.Basis. Then the spatial
extent of the design region is determined by basis and
the design_region argument is ignored.</p>
<p>As an alternative convenience convention, the caller
may omit basis and set design_region; in this case,
an appropriate basis for the given design_region is
automatically created based on the values of various
module-wide adj_opt such as ‘element_type’ and
‘element_length’. This convenience convention is
only available for box-shaped (hyperrectangular)
design regions.</p>
</p></li>
<li><p><strong>cell_size</strong> (<em>Vector3</em>) – </p></li>
<li><p><strong>background_geometry</strong> (<em>list of GeometricObject</em>) – </p></li>
<li><p><strong>foreground_geometry</strong> (<em>list of GeometricObject</em>) – Size of computational cell and lists of GeometricObjects
that {precede,follow} the design object in the overall geometry.</p></li>
<li><p><strong>sources</strong> (<em>list of Source</em>) – </p></li>
<li><p><strong>source_region</strong> (<a class="reference internal" href="../meep_adjoint/docs/API/LowLevel.html#meep_adjoint.Subregion" title="meep_adjoint.Subregion"><em>Subregion</em></a>) – <p>(Specify either sources OR source_region) Specification
of forward source distribution, i.e. the source excitation(s) that
produce the fields from which the objective function is computed.</p>
<p>In general, sources will be an arbitrary caller-created list of Source
objects, in which case source_region, source_component are ignored.</p>
<p>As an alternative convenience convention, the caller may omit
sources and instead specify source_region; in this case, a
source distribution over the given region is automatically
created based on the values of the module-wide configuration
options fcen, df, source_component, source_mode.</p>
</p></li>
<li><p><strong>extra_quantities</strong> (<em>list of str</em>) – </p></li>
<li><p><strong>extra_regions</strong> (<em>list of Subregion</em>) – By default, the module will compute only those DFT fields and
objective quantities needed to evaluate the specified objective
function. These arguments may be used to specify lists of ancillary
quantities and/or ancillary DFT cells (where ‘ancillary’ means
‘not needed to compute the objective function value) to be computed
and reported/plotted as well.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="meep_adjoint.OptimizationProblem.update_design">
<code class="sig-name descname">update_design</code><span class="sig-paren">(</span><em class="sig-param">design=None</em>, <em class="sig-param">beta_vector=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/optimization_problem.html#OptimizationProblem.update_design"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.OptimizationProblem.update_design" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the design permittivity function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>design</strong> (<em>float</em><em>, </em><em>string</em><em>, or </em><em>callable</em>) – specification of new permittivity function</p></li>
<li><p><strong>beta_vector</strong> – basis expansion coefficients for new permittivity function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.OptimizationProblem.visualize">
<code class="sig-name descname">visualize</code><span class="sig-paren">(</span><em class="sig-param">id=None</em>, <em class="sig-param">options={}</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/optimization_problem.html#OptimizationProblem.visualize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.OptimizationProblem.visualize" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a graphical visualization of the geometry and/or fields,
as appropriately autodetermined based on the current state of
progress.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="package-level-functions-for-accessing-configuration-options">
<h2>Package-level functions for accessing configuration options<a class="headerlink" href="#package-level-functions-for-accessing-configuration-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adjoint-solver-options">
<h3>Adjoint-solver options<a class="headerlink" href="#adjoint-solver-options" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="meep_adjoint.get_adjoint_option">
<code class="sig-name descname">get_adjoint_option</code><span class="sig-paren">(</span><em class="sig-param">option</em>, <em class="sig-param">overrides={}</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/adjoint_options.html#get_adjoint_option"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.get_adjoint_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Return currently configured value of option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>option</strong> (<em>str</em>) – name of option</p></li>
<li><p><strong>overrides</strong> (<em>dict</em>) – {option:value} records to override current settings</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Value of option if found in database, or None otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="meep_adjoint.set_adjoint_option_defaults">
<code class="sig-name descname">set_adjoint_option_defaults</code><span class="sig-paren">(</span><em class="sig-param">custom_defaults={}</em>, <em class="sig-param">search_env=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/adjoint_options.html#set_adjoint_option_defaults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.set_adjoint_option_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine intended to be called by meep_adjoint API scripts to set
problem-specific option defaults.
:param custom_defaults: dict of {option:new_default_value} records
:param search_env: True/False to enable/disable scanning environment variables</p>
<blockquote>
<div><p>for option settings</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="visualization-options">
<h3>Visualization options<a class="headerlink" href="#visualization-options" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="meep_adjoint.get_visualization_option">
<code class="sig-name descname">get_visualization_option</code><span class="sig-paren">(</span><em class="sig-param">option</em>, <em class="sig-param">section='default'</em>, <em class="sig-param">overrides={}</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/visualization_options.html#get_visualization_option"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.get_visualization_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Singleton version of the above routine that also allows an
alternative calling convention for convenience: the section
label may be prepended to the name of the option instead of
specified separately. Thus, the following two sets of
parameter values are equivalent:</p>
<blockquote>
<div><p>option=’linewidth’,     section=’pml’
option=’pml_linewidth’  section=’default’  (or section left unspecified)</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="meep_adjoint.get_visualization_options">
<code class="sig-name descname">get_visualization_options</code><span class="sig-paren">(</span><em class="sig-param">opts</em>, <em class="sig-param">section='default'</em>, <em class="sig-param">overrides={}</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/visualization_options.html#get_visualization_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.get_visualization_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return currently configured values of options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>opts</strong> (<em>list of str</em>) – names of options for which we want values</p></li>
<li><p><strong>section</strong> (<em>str</em>) – name of section</p></li>
<li><p><strong>overrides</strong> (<em>dict</em>) – {option:value} records to override current settings</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of option values.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="meep_adjoint.set_visualization_option_defaults">
<code class="sig-name descname">set_visualization_option_defaults</code><span class="sig-paren">(</span><em class="sig-param">custom_defaults={}</em>, <em class="sig-param">search_env=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/visualization_options.html#set_visualization_option_defaults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.set_visualization_option_defaults" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>custom_defaults</strong> – dict of {option:new_default_value} records</p></li>
<li><p><strong>search_env</strong> – True/False to enable/disable scanning environment variables
for option settings</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="meep_adjoint.set_option_defaults">
<code class="sig-name descname">set_option_defaults</code><span class="sig-paren">(</span><em class="sig-param">custom_defaults={}</em>, <em class="sig-param">search_env=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint.html#set_option_defaults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.set_option_defaults" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="LowLevel.html" class="btn btn-neutral float-right" title="Low-level (private) API: Classes and functions intended for use within meep_adjoint" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../implementation/ClassHierarchy.html" class="btn btn-neutral float-left" title="Overview of the meep_adjoint class hierarchy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, MEEP project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>