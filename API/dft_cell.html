

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>dft_cell module &mdash; meep.adjoint 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="basis" href="basis.html" />
    <link rel="prev" title="objective" href="objective.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> meep.adjoint
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">meep_adjoint Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">meep_adjoint: Adjoint-solver module for pymeep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Examples/index.html">Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Visualization/index.html">Visualization Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Config/index.html">Configuration and customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TestSuite/index.html">Test suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Implementation/MathAndPhysicsOfAdjoints.html">Implementation I: Physics and math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Implementation/ClassHierarchy.html">Implementation II: Class hierarchy</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="optimization_problem.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optimization_problem</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="timestepper.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">timestepper</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="objective.html"><code class="xref py py-class docutils literal notranslate"><span class="pre">objective</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dft_cell</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="basis.html"><code class="xref py py-class docutils literal notranslate"><span class="pre">basis</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="finite_element_basis.html"><code class="xref py py-class docutils literal notranslate"><span class="pre">finite_element_basis</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="visualization.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">visualization</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="option_almanac.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">option_almanac</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="adjoint_options.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">adjoint_options</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualization_options.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">visualization_options</span></code> module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">meep.adjoint</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">:py:mod:` API Reference</a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">dft_cell</span></code> module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/API/dft_cell.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-meep_adjoint.dft_cell">
<span id="dft-cell-module"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">dft_cell</span></code> module<a class="headerlink" href="#module-meep_adjoint.dft_cell" title="Permalink to this headline">¶</a></h1>
<p>this file is mostly convenience wrappers around various objects in core pymeep</p>
<p>v3, V3 convert between mp.Vector3 and simple lists or np.arrays of coordinates</p>
<p>Grid repackages ‘array metadata’ with some convenient redundancy</p>
<p>Subregion replaces the 6 separate pymeep data structures used
to describe grid subregions (‘FluxRegion’, ‘FieldsRegion’, etc.)</p>
<p>DFTCell similarly replaces the 5 separate data structures used
to describe sets of frequency-domain field components.</p>
<dl class="class">
<dt id="meep_adjoint.dft_cell.DFTCell">
<em class="property">class </em><code class="sig-prename descclassname">meep_adjoint.dft_cell.</code><code class="sig-name descname">DFTCell</code><span class="sig-paren">(</span><em class="sig-param">region</em>, <em class="sig-param">components=None</em>, <em class="sig-param">fcen=None</em>, <em class="sig-param">df=None</em>, <em class="sig-param">nfreq=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/dft_cell.html#DFTCell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.dft_cell.DFTCell" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simpler data structure for frequency-domain fields in MEEP</p>
<p>The instantiating data of a DFTCell are a grid subregion, a set of
field components, and a list of frequencies. These metadata fields
remain constant throughout the lifetime of a DFTCell.
In addition to the metadata, instances of DFTCell allocate
internal arrays of DFT registers in which the specified components of the
frequency-domain fields at the specified grid points and frequencies
are accumulated over the course of a MEEP timestepping run. These
registers are reset to zero at the beginning of the next timestepping
run, but in the meantime you can use the <code class="docutils literal notranslate"><span class="pre">save_fields</span></code> method
to save an internally cached snapshot of the fields computed on a
given timestepping run.</p>
<p>Note: for now, all arrays are stored in memory. For large calculations with
many DFT frequencies this may become impractical. TODO: disk caching.</p>
<p>The internally-stored frequency-domain fields at a single frequency
may be fetched via the get_EH_slice (single component) or
get_EH_slices (all components) methods. By default these routines
return slices of the currently active fields (i.e. the fields computed
on the most recent timestepping run), but they accept an optional
parameter specifying the label of a data set stored by a call to
<code class="docutils literal notranslate"><span class="pre">save_fields</span></code> after a previous timestepping run.</p>
<p>For convenience, DFTCell also offers a get_eigenmode_slices() method that
computes and returns eigenfield profiles in the same format as DFT fields.</p>
<p>DFTCells also know how to crunch their internally-stored field-component
data to compute various physical quantities of interest, such as
Poynting fluxes and field energies. We consider this the primary
functionality exported by DFTCell, and thus implement it as the
__call__ method of the class.</p>
<p>DFTCell replaces the DftFlux, DftFields, DftNear2Far, DftForce, DftLdos,
and DftObj structures in core pymeep.</p>
<dl class="method">
<dt id="meep_adjoint.dft_cell.DFTCell.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">qcode</em>, <em class="sig-param">mode=0</em>, <em class="sig-param">nf=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/dft_cell.html#DFTCell.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.dft_cell.DFTCell.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute and return the value of an objective quantity.
:param qcode: string identifying the quantity (‘S’ for flux, etc.)
:param mode: eigenmode index, only needed for some quantities
:param nf: frequency index</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.DFTCell.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">region</em>, <em class="sig-param">components=None</em>, <em class="sig-param">fcen=None</em>, <em class="sig-param">df=None</em>, <em class="sig-param">nfreq=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/dft_cell.html#DFTCell.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.dft_cell.DFTCell.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="attribute">
<dt id="meep_adjoint.dft_cell.DFTCell.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#meep_adjoint.dft_cell.DFTCell.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="meep_adjoint.dft_cell.Grid">
<em class="property">class </em><code class="sig-prename descclassname">meep_adjoint.dft_cell.</code><code class="sig-name descname">Grid</code><span class="sig-paren">(</span><em class="sig-param">xtics</em>, <em class="sig-param">ytics</em>, <em class="sig-param">ztics</em>, <em class="sig-param">points</em>, <em class="sig-param">weights</em>, <em class="sig-param">shape</em><span class="sig-paren">)</span><a class="headerlink" href="#meep_adjoint.dft_cell.Grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.__getnewargs__">
<code class="sig-name descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self as a plain tuple.  Used by copy and pickle.</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.__new__">
<em class="property">static </em><code class="sig-name descname">__new__</code><span class="sig-paren">(</span><em class="sig-param">_cls</em>, <em class="sig-param">xtics</em>, <em class="sig-param">ytics</em>, <em class="sig-param">ztics</em>, <em class="sig-param">points</em>, <em class="sig-param">weights</em>, <em class="sig-param">shape</em><span class="sig-paren">)</span><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.__new__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new instance of Grid(xtics, ytics, ztics, points, weights, shape)</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.__repr__">
<code class="sig-name descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a nicely formatted representation string</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid._asdict">
<code class="sig-name descname">_asdict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#meep_adjoint.dft_cell.Grid._asdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new OrderedDict which maps field names to their values.</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid._make">
<em class="property">classmethod </em><code class="sig-name descname">_make</code><span class="sig-paren">(</span><em class="sig-param">iterable</em><span class="sig-paren">)</span><a class="headerlink" href="#meep_adjoint.dft_cell.Grid._make" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a new Grid object from a sequence or iterable</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid._replace">
<code class="sig-name descname">_replace</code><span class="sig-paren">(</span><em class="sig-param">**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#meep_adjoint.dft_cell.Grid._replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Grid object replacing specified fields with new values</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.points">
<em class="property">property </em><code class="sig-name descname">points</code><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.points" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.shape">
<em class="property">property </em><code class="sig-name descname">shape</code><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.weights">
<em class="property">property </em><code class="sig-name descname">weights</code><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.xtics">
<em class="property">property </em><code class="sig-name descname">xtics</code><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.xtics" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.ytics">
<em class="property">property </em><code class="sig-name descname">ytics</code><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.ytics" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="meep_adjoint.dft_cell.Grid.ztics">
<em class="property">property </em><code class="sig-name descname">ztics</code><a class="headerlink" href="#meep_adjoint.dft_cell.Grid.ztics" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="meep_adjoint.dft_cell.Subregion">
<em class="property">class </em><code class="sig-prename descclassname">meep_adjoint.dft_cell.</code><code class="sig-name descname">Subregion</code><span class="sig-paren">(</span><em class="sig-param">xmin=None</em>, <em class="sig-param">xmax=None</em>, <em class="sig-param">center=array([0.</em>, <em class="sig-param">0.</em>, <em class="sig-param">0.])</em>, <em class="sig-param">size=None</em>, <em class="sig-param">normal=None</em>, <em class="sig-param">dir=None</em>, <em class="sig-param">name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/dft_cell.html#Subregion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.dft_cell.Subregion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Specification of grid subregion</p>
<p>A Subregion is a finite hyperrectangular spatial region contained
within the meep computational cell.
A subregion may be of codimension 1 (i.e. it is a line in 2D
or a plane in 3D), in which case it has a normal direction.
Codim-1 subregions are used to define eigenmode sources and
to evaluate Poynting fluxes and eigenmode expansion coefficients.</p>
<p>Alternatively, the subregion may be of codimension 0, i.e.
it is a full rectangle (2D) or box (3D), or of dimemsion 0, i.e.
a point.</p>
<dl class="method">
<dt id="meep_adjoint.dft_cell.Subregion.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">xmin=None</em>, <em class="sig-param">xmax=None</em>, <em class="sig-param">center=array([0.</em>, <em class="sig-param">0.</em>, <em class="sig-param">0.])</em>, <em class="sig-param">size=None</em>, <em class="sig-param">normal=None</em>, <em class="sig-param">dir=None</em>, <em class="sig-param">name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/meep_adjoint/dft_cell.html#Subregion.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#meep_adjoint.dft_cell.Subregion.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="attribute">
<dt id="meep_adjoint.dft_cell.Subregion.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#meep_adjoint.dft_cell.Subregion.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="basis.html" class="btn btn-neutral float-right" title="basis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="objective.html" class="btn btn-neutral float-left" title="objective" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, MEEP project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>